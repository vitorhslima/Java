import java.util.Scanner;

public class Casa {
	
	private Quarto quarto = new Quarto();
	private Sala sala = new Sala();
	private Estrutura estrutura = new Estrutura();
	private Banheiro banheiro = new Banheiro();
	
	public Banheiro getBanheiro() {
		return banheiro;
	}

	public Estrutura getEstrutura() {
		return estrutura;
	}

	public Quarto getQuarto() {
		return quarto;
	}

	public void setQuarto(Quarto quarto) {
		this.quarto = quarto;
	}

	public Sala getSala() {
		return sala;
	}

	public void setSala(Sala sala) {
		this.sala = sala;
	}
	
	public void gerenciaCasa() {
		
		Casa casa = new Casa();

		Scanner s = new Scanner(System.in);

		String comodo = "";

		boolean primeiraVez = true;
		casa.getSala().setFliperama(true);
		casa.getQuarto().setTelevisao(true);
		casa.getQuarto().getLampada().setAcessa(true);
		casa.getSala().getLampada().setAcessa(true);
		casa.getBanheiro().getLampada().setAcessa(true);

		System.out.println("=-=-=-=-=-=-=-=-=-=-=-=-=");  
		System.out.println("Para sair escreva 'sair' ");
		System.out.println("=-=-=-=-=-=-=-=-=-=-=-=-=");

		 
			
		
				
		while ((!comodo.equals("sair")) 
				|| (casa.getSala().isfliperamaLigado()) 
				|| (casa.getQuarto().isTvLigada())
				|| (casa.getSala().getLampada().isAcesa())
				|| (casa.getQuarto().getLampada().isAcesa())
				|| (casa.getBanheiro().getLampada().isAcesa())) {

			try {
			if (primeiraVez) {
				casa.getSala().setFliperama(false);
				casa.getQuarto().setTelevisao(false);
				casa.getQuarto().getLampada().setAcessa(false);
				casa.getSala().getLampada().setAcessa(false);
				casa.getBanheiro().getLampada().setAcessa(false);
				primeiraVez = false;
			}

			System.out.println("--------------------------");
			System.out.println("Qual comodo você quer ir ?");
			System.out.println("--------------------------");
			comodo = s.next().toLowerCase();

			boolean existeComando = false;

			for (ComodoEnum c : ComodoEnum.values()) {
				if (comodo.equals(c.name())) {
					existeComando = true;
				}
			}

			if (existeComando == true) {
				if (!comodo.equals("sair")) {
					System.out.println("----------------------");
					System.out.println("Você está no " + comodo);
					System.out.println("----------------------");
				}

			} else {
				if (!comodo.equals("sair")) {
					throw new ComodoInvalidoExcption("Esse comodo é invalido");					
				}
			}

			if (comodo.equals("quarto")) {
				casa.getQuarto().ligaTv(comodo, true);
			}

			if (comodo.equals("sala")) {
				casa.getSala().ligaFlp(comodo, true);
			}
			
			if (comodo.equals("banheiro")) {
				casa.getBanheiro().ligandoLuzBanheiro(comodo);
			}
				

			if (comodo.equals("sair") && (casa.getQuarto().isTvLigada())) {
				System.out.println("Desligue a televisão para sair");
				System.out.println("------------------------------");
			}
			
			if (comodo.equals("sair") && (casa.getSala().isfliperamaLigado())) {
				System.out.println("Desligue o Fliperama para sair");
				System.out.println("------------------------------");
			}
			
			if (comodo.equals("sair") && (casa.getQuarto().getLampada().isAcesa())) {
				System.out.println("Apague a lampada do Quarto");
				System.out.println("------------------------------");
			}
			
			if (comodo.equals("sair") && (casa.getSala().getLampada().isAcesa())) {
				System.out.println("Apague a lampada da Sala");
				System.out.println("------------------------------");
			}
			
			if (comodo.equals("sair") && (casa.getBanheiro().getLampada().isAcesa())) {
				System.out.println("Apague a luz do Banheiro");
				System.out.println("------------------------------");
			}
			
			}catch (ComodoInvalidoExcption ex) {
				String msg = ex.getMessage();
				System.out.println("-----------------------");  
				System.out.println(ex.getMessage());
				System.out.println("-----------------------");
			}				

		}

		
		System.out.println("|°.°|°.°|°.°|°.°|°.°|°.°|°.°|°.°|°.°|°.°|°.°|");
		System.out.println("você está saindo de casa, até a proxima :)");
		System.out.println("|°.°|°.°|°.°|°.°|°.°|°.°|°.°|°.°|°.°|°.°|°.°|");
		
	}	
	

}
